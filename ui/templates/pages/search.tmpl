{{ define "page" }}

    <div class="search-container">
        <div class="search-header">
            <h1>Recherche</h1>
        </div>

        <form class="search-form" method="get" action="/search">
            <input type="search" name="q" placeholder="Rechercher..." class="search-input">
            <button type="submit" class="search-button">Rechercher</button>
        </form>

        <div class="search-filters">
            <select class="filter-select" name="type">
                <option value="">Tous les types</option>
                <option value="cars">Véhicules</option>
                <option value="clients">Clients</option>
                <option value="transactions">Transactions</option>
            </select>
            <select class="filter-select" name="sort">
                <option value="id">ID</option>
                <option value="created_at">Date de création</option>
                <option value="updated_at">Date de modification</option>
            </select>
        </div>

        <div class="results-info">
            {{ .Metadata.TotalRecords }} résultats trouvés
        </div>

        <div class="results-grid">
            {{ range .Results }}
                {{ if eq .Type "car" }}
                    <div class="result-card">
                        <div class="result-type">Véhicule</div>
                        <h2 class="result-title">{{ .Make }} {{ .Model }}</h2>
                        <div class="result-details">
                            <div>Statut: {{ .Status }}</div>
                            <div>Kilométrage: {{ .Kilometers }} km</div>
                            <div>Prix: {{ .Price }} €</div>
                            <div>Concession: {{ .Shop }}</div>
                        </div>
                        <a href="/car/{{ .ID }}" class="result-link">Voir les détails →</a>
                    </div>
                {{ else if eq .Type "client" }}
                    <div class="result-card">
                        <div class="result-type">Client</div>
                        <h2 class="result-title">{{ .FirstName }} {{ .LastName }}</h2>
                        <div class="result-details">
                            <div>Email: {{ .Email }}</div>
                            <div>Téléphone: {{ .Phone }}</div>
                            <div>Statut: {{ .Status }}</div>
                            <div>Concession: {{ .Shop }}</div>
                        </div>
                        <a href="/client/{{ .ID }}" class="result-link">Voir le profil →</a>
                    </div>
                {{ else if eq .Type "transaction" }}
                    <div class="result-card">
                        <div class="result-type">Transaction</div>
                        <h2 class="result-title">Transaction #{{ .ID }}</h2>
                        <div class="result-details">
                            <div>Statut: {{ .Status }}</div>
                            <div>Client: {{ .Client.FirstName }} {{ .Client.LastName }}</div>
                            <div>Montant total: {{ .TotalPrice }} €</div>
                            <div>Date: {{ .CreatedAt.Format "02/01/2006" }}</div>
                        </div>
                        <a href="/transaction/{{ .ID }}" class="result-link">Voir les détails →</a>
                    </div>
                {{ end }}
            {{ end }}
        </div>

        {{ template "pagination" .Metadata }}
    </div>

{{ end }}